<!DOCTYPE html>
<html>
	<head>
		<meta charset='utf-8' />
		<title></title>
		<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
		<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.js'></script>
		<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.css' rel='stylesheet' />
		<style>
			body { margin:0; padding:0; }
			#map { position:absolute; top:0; bottom:0; width:100%; }
		</style>
	</head>
	<body>
	<div id='map'></div>
	<script>
		// starting position
		var center = {
			lat: 32.72269876352742,
			lng: -117.15117725013909
		};
		// starting zoom
		var zoom = 15;

		//	center recreation
		if (window.location.hash){
			var parts = window.location.hash.split(',');
			if (parts.length == 3) {
				zoom = parts[0].replace('#','');
				center.lng = parts[1];
				center.lat = parts[2];
			};
		}

		//	init map
		mapboxgl.accessToken = 'pk.eyJ1IjoiYXJvbGVrIiwiYSI6IkFqeVVOUnMifQ.JPIIcBsgdLn3ZcUNVMMN-g';
		var map = new mapboxgl.Map({
			container: 'map', // container id
			style: 'js/mapbox.json',
			center: [center.lng, center.lat], 
			zoom: zoom 
		});

		//	update url hash on moveend
		map.on('moveend', function (e) {
			window.location.hash = parseFloat(map.getZoom()).toFixed(2) + ',' + parseFloat(map.getCenter().lng).toFixed(5) + ',' + parseFloat(map.getCenter().lat).toFixed(5);
		});
	</script>
	</body>
</html>